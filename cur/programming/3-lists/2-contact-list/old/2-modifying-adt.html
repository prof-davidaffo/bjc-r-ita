<!DOCTYPE html>

<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<script src="/bjc-r-ita/llab/loader.js" type="text/javascript"></script>
<title>Unit 3 Lab 1: Contact List, Page 2</title>
</head>
<body>
<h2>Creating the Name ADT</h2>
<div class="learn">
<p>
<strong>On this page,</strong> you will develop an
        <strong>Abstract Data Type</strong> to store and access
        <em>name data</em> (first-name, last-name, etc.).
      </p>
</div>
<div class="dialogue">
<div>
<span>Jasmine:</span> Right now, our program uses <em>one</em> text
        string to hold each contact's name, but people have multiple names.
      </div>
<div><span>Omar:</span> We can just put both names in together.</div>
<div>
<span>Jasmine:</span> Let's look at the list on your phone.<br/>
<img alt="list of names" height="150" src="/bjc-r-ita/img/3-lists/contacts.png" title="list of names"/><br/>
        Ah, they're sorted by last name, even though it's not the beginning of
        the name text.
      </div>
<div>
<span>Omar:</span> Hmmm... What if we used another list to separate the
        last name from the first name?
      </div>
<div>
<span>Jasmine:</span> OK. So, we could make a <code>name</code> ADT and
        two new selectors: one to report the name they way it appears for the
        user: first-name last-name; and one to report the name so we can sort
        it: last-name comma first-name.
      </div>
</div>
<div class="forYouToDo" id="first">
<ol>
<!--<div class="sidenote">
                    You could paste this text into the "Make a block" window:<br />
                    <code>name, first: %first last: %last</code>
                </div>-->
<li>If it isn't open already, open your U3L1-ContactList project.</li>
<li>
          Develop a <code>name</code> constructor. It should accept a
          <var>first name</var> and <var>last name</var> as input and report the
          whole name as a list:<br/>
<img alt="name, first: (Barack) last: (Obama) reporting {Barack, Obama}" class="indent" src="/bjc-r-ita/img/3-lists/name-constructor-reporting.png" title="name, first: (Barack) last: (Obama) reporting {Barack, Obama}"/>
</li>
<li>
<!--<div class="sidenote"><code>display form of name: %name</code></div>
                    <div class="sidenote"><code>sorting form of name: %name</code></div>-->
          Create two new selectors to distinguish between the two orders by
          using <code>join</code>. Test them with your
          <code>name</code> constructor.<br/>
<img alt="display-form from name: (name, first (Barack) Last: (Obama)) reporting {Barack Obama}" class="indent" src="/bjc-r-ita/img/3-lists/name-display-result.png" title="display-form from name: (name, first (Barack) Last: (Obama)) reporting {Barack Obama}"/><br/>
<img alt="sorting-form from name: (name, first (Barack) Last: (Obama)) reporting {Obama, Barack}" class="indent" src="/bjc-r-ita/img/3-lists/name-sorting-result.png" title="sorting-form from name: (name, first (Barack) Last: (Obama)) reporting {Obama, Barack}"/>
<div class="endnote">
<a data-toggle="collapse" href="#hint-target" title="Hint">Click here for a hint.</a>
<div class="collapse" id="hint-target">
<img alt="display form of name: (name) block definition" class="indent" src="/bjc-r-ita/img/3-lists/display-form-definition.png" title="display form of name: (name) block definition"/>
</div>
</div>
</li>
<li>
          Give the selectors expected input types to make it obvious that they
          each expect a list (one whole name) as input.
        </li>
<li>
<strong>Analyze and Debug.</strong> Jasmine and Omar tried to use
          their <code>sorting form of name</code> block together with their
          <code>contact</code> constructor. They were expecting their code to
          report "Anderson, Jasmine", but it didn't work.<br/>
<img alt="sorting-form from name: (contact name: (Betsy) address: (123 Main St. #4, New York, NY 10001) phone: (212-555-1234)) reporting 123 Main St. #4, New York, NY 10001 Betsy Anderson" class="indent" src="/bjc-r-ita/img/3-lists/name-sorting-contact-result.png" title="sorting-form from name: (contact name: (Betsy) address: (123 Main St. #4, New York, NY 10001) phone: (212-555-1234)) reporting 123 Main St. #4, New York, NY 10001 Betsy Anderson"/><br/>
<img alt="Talk with Your Partner" class="inline" src="/bjc-r-ita/img/icons/talk-with-your-partner.png" title="Talk with Your Partner"/>
          What's going wrong? What could they do instead?
        </li>
<li>
          Make the <var>name</var> input slot of your
          <code>contact</code> constructor expect a list item, as shown here:<br/>
<img alt="contact name: () address: () phone: ()" class="indent" src="/bjc-r-ita/img/3-lists/contact-constructor-name-typed.png" title="contact name: () address: () phone: ()"/>
</li>
<li>
          Clear your list (reset it to an empty list), and add a few contacts
          using the <code>name</code> constructor.<br/>
<img alt="contact name: (name, first: (Betsy) last: (Anderson)) address: (123 Main St. #4, New York, NY 10001) phone: (212-555-1234)" class="indent" src="/bjc-r-ita/img/3-lists/contact-constructor-with-name-constructor.png" title="contact name: (name, first: (Betsy) last: (Anderson)) address: (123 Main St. #4, New York, NY 10001) phone: (212-555-1234)"/>
</li>
<li>
<strong>Debug any problems.</strong> The contacts in your
          <var>contact list</var> should each have a list as the first name,
          like this:<br/>
<img alt="Save your work" class="imageRight" src="/bjc-r-ita/img/icons/save-now.png" title="Save your work"/>
<img alt="contact list watcher in list view showing contact with name as list" class="indent" src="/bjc-r-ita/img/3-lists/contact-list-list-view-name-list.png" title="contact list watcher in list view showing contact with name as list"/>
</li>
</ol>
</div>
<div class="ifTime">
<img alt="contact list with one contact showing: {{Betsy, Anderson}, {123 Main St. #4, New York, NY, 10001}, 212-555-1234}" class="imageRight" src="/bjc-r-ita/img/3-lists/contact-list-with-name-and-address-types.png" title="contact list with one contact showing: {{Betsy, Anderson}, {123 Main St. #4, New York, NY, 10001}, 212-555-1234}"/>
<ol start="9">
<li>
          Develop an abstract data type (ADT) to store and access
          <em>address data</em>.
          <ol>
<li>
              Create an ADT to manage four pieces of data for each address:
              <var>street address</var>, <var>city</var>, <var>state</var>, and
              <var>zip</var>. You will need:
              <ul>
<li>One <code>address</code> constructor</li>
<li>
                  Four selectors: <code>street address from address</code>,
                  <code>city from address</code>,
                  <code>state from address</code>, and
                  <code>zip from address</code>.
                </li>
</ul>
</li>
<li>
              Make the <var>address</var> input slot of your
              <code>contact</code> constructor expect a list.
            </li>
<li>
              Clear your list, add several contacts using your
              <code>name</code> and <code>address</code> constructors, and try
              selecting specific data (such as the city) from a
              <code>contact</code>.
            </li>
<li><strong>Debug</strong> any problems.</li>
</ol>
</li>
</ol>
<img alt="Save your work" class="imageRight" src="/bjc-r-ita/img/icons/save-now.png" title="Save your work"/>
</div>
<div class="takeItFurther">
<img alt="Tough Stuff" src="/bjc-r-ita/img/icons/tough-stuff-mini.png" title="Tough Stuff"/>
      but worth it!

      <div class="dialogue">
<div class="stagedir">
          Mei and Morgan join the conversation about Contact List
        </div>
<!--               -->
<div>
<span>Mei:</span> Do you want your app to work in China? People there
          put their family name first, so Sun Yìxiān is in the Sun family, and
          would be in the S part of your name list, not the Y part.
        </div>
<div>
<span>Morgan:</span> So, you're saying we need two different
          <code>name</code> types, with different constructors and selectors?
        </div>
<div>
<span>Omar:</span> At least two. After you finish your program, I'll
          tell you about names in Iceland (given name first, but sorted on given
          name, not family name) and Myanmar (no family name at all)!
        </div>
<div class="stagedir">
          Morgan puts his head in his hands and groans.
        </div>
<div>
<span>Jasmine:</span> Nah, it doesn't have to be that bad. We'll just
          have one <code>name</code> type, but it'll have <em>variants,</em> and
          we'll include a <em>type tag</em> along with the given and family
          parts to indicate <strong>given-first</strong> (as in the US) or
          <strong>family-first</strong> (as in China). Omar can add more
          variants later if he wants.
        </div>
</div>
<ol type="A">
<li>
          Make this block:<br/>
<img alt="name, type: ( ) given: ( ) family: ( ):  report (list type given family)" class="indent" src="/bjc-r-ita/img/3-lists/typed-name.png" title="name, type: ( ) given: ( ) family: ( ):  report (list type given family)"/>
</li>
<li>
          There are only two allowable values for the <var>type</var> input, and
          you won't want users of your program to have to remember them and type
          them in without spelling errors. Instead, you want a
          <em>menu</em> input, like this:<br/>
<img alt="name block with menu input slot for type" class="indent" src="/bjc-r-ita/img/3-lists/dropdown-block.png"/><br/>
<div class="narrowpurple">
<h3 class="box-head">Adding Menu Inputs</h3>
<ol type="a">
<li>
                Edit the <code>name</code> block, and click on the orange
                <var>type</var> variable in its hat block.
              </li>
<li>
                Click on the right-pointing triangle to open the input type
                selector.
              </li>
<li>
                Right-click on the background, and select "options..." <br/>
<img alt="option context menu in input dialog" height="460" src="/bjc-r-ita/img/3-lists/option-context-menu.png"/><br/>
</li>
<li>
                Enter the type tags in the box, one per line:<br/>
<img alt="menu options 'given-first' and 'family-first'" height="460" src="/bjc-r-ita/img/3-lists/option-dialog.png" title="menu options 'given-first' and 'family-first'"/>
</li>
<li>
                Click OK, then right-click the type selector again and choose
                "read-only."
                <div class="endnote">
                  There are two kinds of menu input slots:<br/>
<img alt="touching (...) ?  read-only input slot" class="indent" src="/bjc-r-ita/img/3-lists/dropdown-touching.png" title="touching (...) ?  read-only input slot"/><br/>
<img alt="item (...) non-read-only menu input slot" class="indent" src="/bjc-r-ita/img/3-lists/dropdown-item.png" title="item (...) non-read-only menu input slot"/><br/>
                  For this block, we don't want users to enter values other than
                  the ones in the menu.
                </div>
</li>
<li>
                Click OK on the <var>type</var> input box and then on the Block
                Editor.
              </li>
</ol>
</div>
</li>
</ol>
<!--                  <ol type="A" start="3">
      	<li>
                    Make the three selectors: <code>type tag</code>, <code>given from name</code>, and <code>family from name</code>.
                    <a href="#hint-target" data-toggle="collapse">Click here to see an example.</a>
                    <div id="hint-target" class="collapse"><img class="indent" src="/bjc-r-ita/img/3-lists/given-name.png" alt="given name (name): report item 2 of (name)"></div>
                </li>
                
            </ol>
            
            
<img alt="name type (name): report item 1 of (name)" src="/bjc-r-ita/img/3-lists/name-type.png"/>
<img alt="given name (name): report item 2 of (name)" src="/bjc-r-ita/img/3-lists/given-name.png"/>
<img alt="family name (name):  report item 3 (name)" src="/bjc-r-ita/img/3-lists/family-name.png"/>
<div>
<span>Omar:</span> Don't call the first one
          <code>type from name</code>. We're going to need the same type
          selector for other ADTs also, so call it <code>type tag</code>.
        </div>
<div><span>Morgan:</span> How do you know?</div>
<div><span>Omar:</span> I read ahead in the curriculum!</div>
<div class="stagedir">Morgan and Jasmine groan.</div>
</div>
<ol start="3" type="A">
<li>
          Make the three selectors, using Omar's suggested name for the first
          one.
        </li>
<img alt="family from name: (name, type: given-first given: Abraham family: Lincoln)  --&gt;  Lincoln" src="/bjc-r-ita/img/3-lists/lincoln.png"/>
</ol>
<div class="dialogue">
<div>
<span>Morgan:</span> But I'm not sure how this variant idea is going
          to help. Mostly, the rest of the program isn't going to want the
          family name alone. It's going to want the <em>entire</em> name, either
          in display order or in sorting order, so aren't we going to need
          blocks like
          <img alt="given first name in sorted form (name)" src="/bjc-r-ita/img/3-lists/given-first-name-sorted-order.png"/>
          and so on?
        </div>
<div>
<span>Jasmine:</span> Oh, hang on, you're thinking of it as a selector
          just for one variant (given-first names), but we can simplify a bit by
          thinking of it as a selector for <em>all</em> names,
          <img alt="name (sorted form) ( )" src="/bjc-r-ita/img/3-lists/name-sorted-block.png"/>. The definition is a little more complicated, but the rest of the
          program will be able to use it without caring what kind of variant it
          has.
        </div>
</div>
<ol start="4" type="A">
<li>
<div class="sidenote">
            For a given-first name we put a comma and space between the names,
            "Anderson, Jasmine"; there won't be a comma for family-first names
            ("Sun Yìxiān").
          </div>

          Finish this definition:<br/>
<img alt="name (sorted form) (name):  if ((type tag (name)) = [given-first]) report (join (family name (name)) [, ] (given name (name)))" src="/bjc-r-ita/img/3-lists/name-sorted-defn.png"/><br/>
</li>
<li>
          Similarly, define
          <img alt="name (display form) ( )" src="/bjc-r-ita/img/3-lists/name-display.png"/>.
        </li>
</ol>
<div class="dialogue">
<div>
<span>Morgan:</span> Oh, I see! Now in the rest of the program we can
          just say things like<br/>
<img alt="for each (contact) of (contact list)  say (name (display form) (contact name (contact))) for 2 secs" src="/bjc-r-ita/img/3-lists/foreach-say-name.png" title="for each (contact) of (contact list)  say (name (display form) (contact name (contact))) for 2 secs"/>
</div>
<div>
<span>Jasmine:</span> It's even better than that! This is where the
          magic comes in. When we make the Contact ADT, we give it a type tag
          too:<br/>
<img alt="contact, name: (name) address: (address) phone: (phone): report (list [contact] (name) (address) (phone))" src="/bjc-r-ita/img/3-lists/contact-with-tag.png" title="contact, name: (name) address: (address) phone: (phone): report (list [contact] (name) (address) (phone))"/><strong><br/>
            (We'll have to change the selectors, too, and recreate the contact
            list.)</strong><br/>
<br/>
          Then, since contacts have type tags, we can make
          <em>the same selector blocks</em> work for them, too:<br/>

<img alt="name (display form) (object):  if ... if ((type tag (object)) = contact) report (name (display form) (contact name (object))) ..." height="421" src="/bjc-r-ita/img/3-lists/display-name-object.png" title="name (display form) (object):  if ... if ((type tag (object)) = contact) report (name (display form) (contact name (object))) ..."/><br/>
          Ta da! Now your code is just<br/>
<img alt="for each (contact) of (contact list) say (name (display form) (contact)) for 2 secs" src="/bjc-r-ita/img/3-lists/foreach-display-contact.png" title="for each (contact) of (contact list) say (name (display form) (contact)) for 2 secs"/>
</div>
</div>
<ol start="6" type="A">
<li>Create all that, and make sure Jasmine's "magic" works.</li>
<li>Then add Omar's variants for names in Iceland and Myanmar.</li>
</ol>
</div>
</body>
</html>
