<!DOCTYPE html>

<html lang="en">
<head>
<meta content="text/html; charset=utf-8" http-equiv="content-type"/>
<script src="/bjc-r-ita/llab/loader.js" type="text/javascript"></script>
<script src="/bjc-r-ita/utilities/gifffer.min.js" type="text/javascript"></script>
<script type="text/javascript">window.onload = function() {Gifffer();}</script>
<link href="/bjc-r-ita/css/bjc-gifffer.css" rel="stylesheet" type="text/css"/>
<title>Unit 3 Lab 4: Building Data Visualization Tools, Page 1</title>
</head>
<body>
<h2>Creating Bar Graphs</h2>


<div class="learn">
<p>
<strong>In this project,</strong> you will create a <em>general purpose</em> data visualization tool that can generate bar graphs for a variety of data sets.  You will practice using <em>abstraction</em> and the higher-order function <code>map</code>.<br/>
<img alt="Table of CO2 Emissions by Country" class="indent" height="300" src="/bjc-r-ita/img/3-lists/BarGraph_img/CO2Table.png" title="Table of CO2 Emissions by Country"/><img alt="bar graph of 2011 Top CO2 Emissions" height="300" src="/bjc-r-ita/img/3-lists/BarGraph_img/BarGraphAnimation.gif" title="bar graph of 2011 Top CO2 Emissions"/>
</p>
</div>
<div class="forYouToDo" id="first">
<ol>
<li>
<img alt="Talk with Your Partner" class="imageRight" src="/bjc-r-ita/img/icons/talk-with-your-partner.png" title="Talk with Your Partner"/>
                    Technology has come at the cost of environmental pollution around the world. In collaboration with your partner, examine the data table given on <a href="http://www.ucsusa.org/global_warming/science_and_impacts/science/each-countrys-share-of-co2.html#.WVqJI9PytE5" target="_blank" title="Each Country's Share of CO2 Emissions">this link</a>. 
                    <ol>
<li>What countries have the highest Carbon Dioxide (CO<sub>2</sub>) emissions?</li>
<li>What countries have the highest CO<sub>2</sub> emissions per capita (per person)?</li>
<li>Which of these measures do you think is a better indicator of a country's contribution to global environmental pollution?</li>
</ol>
</li>
<div class="takeNote">You can gain knowledge and insights by talking to others (in person or online) as you form questions and hypotheses about data.</div>
<li>
<a class="run" href="/bjc-r-ita/prog/3-lists/U3L4-BarGraph.xml"><img alt="Click here to load a starter project. Then save it." class="inline" src="/bjc-r-ita/img/icons/load-save.png" title="Click here to load a starter project. Then save it."/></a>
<div class="endnote">
                        This file contains
                        <ul>
<li>
                                A <em>constructor</em> of a new ADT (Abstract Data Type) called <code>data-record</code> with two fields <code>label</code> and <code>value</code>.<br/>
<img alt="data-record, label:(China) value:(8715) reporting {China, 8715}" class="indent" height="135" src="/bjc-r-ita/img/3-lists/BarGraph_img/datalabelvaluewithResult.png" title="data-record, label:(China) value:(8715) reporting {China, 8715}">
</img></li>
<li>
                                Two <em>selectors</em> for the new ADT, <!--<code>label from data-record</code> and <code>value from data-record</code>-->to extract specific data from a <code>data-record</code> input.<br/>
<img alt="label from data-record:(data-record, label:(China) value:(8715)) reporting China" class="indent" height="50" src="/bjc-r-ita/img/3-lists/BarGraph_img/getlabelwithResult.png" title="label from data-record:(data-record, label:(China) value:(8715)) reporting China"><br/>
<img alt="value from data-record:(data-record, label:(China) value:(8715)) reporting 8715" class="indent" height="50" src="/bjc-r-ita/img/3-lists/BarGraph_img/getvaluewithResult.png" title="value from data-record:(data-record, label:(China) value:(8715)) reporting 8715"/><br/>
</img></li>
<li>
                                A <code>max of list</code> reporter that finds the largest element of a list.<br/>
<img alt="max of list (list{1,7,-3,4}) reporting 7" class="indent" height="50" src="/bjc-r-ita/img/3-lists/BarGraph_img/maxoflistwithResult.png" title="max of list (list{1,7,-3,4}) reporting 7"/>
</li>
</ul>
</div>
                    Explore the blocks already written for you and understand how they work.<br/>
</li>
<li>
                    Develop code for the <code>draw axes</code> block.  It should draw the <em>horizontal</em> and <em>vertical</em> axes based on the given stage coordinates of the origin <var>x0</var>, <var>y0</var> and the given length, height information.  <br/>
<img alt="draw axes, x0:(-200) y0:(-90) horizontal length:(400) vertical height:(240)" class="indent" height="60" src="/bjc-r-ita/img/3-lists/BarGraph_img/drawAxis.png" title="draw axes, x0:(-200) y0:(-90) horizontal length:(400) vertical height:(240)"/><br/>
<div class="endnote">
                        This diagram may help you understand how the given information will determine the <em>horizontal</em> and <em>vertical</em> axes. As you will be graphing only positive values, the axes should meet in the lower left corner as shown in the diagram.  There should not be any labels or tick marks at this point.  The markings in the diagram are shown for clarity. <br/>
<img alt="x-y axes" class="indent" height="200" src="/bjc-r-ita/img/3-lists/BarGraph_img/axeshorizvert.png" title="x-y axes"/>
</div>
                    In the <code>draw axes</code> block also make sure that the coordinates of the origin is stored in global variables <var>x-origin</var>, <var>y-origin</var>.  In the upcoming steps of this project, other blocks will need this information to properly allign the bars and labels .<br/>
<img alt="Variables x-origin, y-origin" class="indent" height="100" src="/bjc-r-ita/img/3-lists/BarGraph_img/globalx0y0.png" title="Variables x-origin, y-origin"/>
<img alt="set(x-origin) to (x0), set(y-origin) to (y0)" height="75" src="/bjc-r-ita/img/3-lists/BarGraph_img/setXYOrigin.png" title="set(x-origin) to (x0), set(y-origin) to (y0)"/>
<div class="sidenote">
                        You can import the basic <code>label</code> block in your new projects via the "Import tools" option of the File menu:<br/>
<img alt="Import tools option" height="150" src="/bjc-r-ita/img/3-lists/BarGraph_img/importTools.png" title="Import tools option"/>
</div>
</li>
<li>
                    Explore the basic <code>label</code> block included in the starter project.  Try changing the location and direction of the drawing sprite.<br/>
<img alt="label(Hello!) of size(12)" class="indent" height="45" src="/bjc-r-ita/img/3-lists/BarGraph_img/labelofsize.png" title="label(Hello!) of size(12)"/>
<div class="endnote">
<p> Note that the <code>label</code> block does not need to have <code>pen down</code> in order to do its writing.  Having <code>pen down</code>  with the <code>label</code> block may cause some undesired effects.<br/><br/>
                            You're not required to look inside the <code>label</code> block, but if you do, you'll see something unfamiliar.<br/>
<a class="collapsed" data-toggle="collapse" href="#hint-1" title="More information">Show more information.</a>
<div class="collapse" id="hint-1">
<img alt="Label with JavaScript" class="indent" height="150" src="/bjc-r-ita/img/3-lists/BarGraph_img/labelwithJS.png" title="Label with JavaScript"/><br/>
                                Snap<em>!</em>, like pretty much everything that runs in a browser, is written in a programming language called <em>JavaScript</em>.  The <code>label</code> block is implemented using a Snap! <code>JavaScript function</code>  block that allows advanced users to extend Snap<em>!</em> by adding new blocks written in JavaScript.
                        	</div>
</p>
                        You don't need to know how the <code>label</code> block works to be able to use it.  By hiding its inner complexity from its users, the <code>label</code> block is a perfect example of <em>abstraction</em>.<br/>
</div>
</li>
<li>
                    Use the basic <code>label</code> block to develop code for the more elaborate <code>label</code> block that will place a label with the inputted specifications (text, size and direction.) <br/><br/>
<img alt="label, text:(China) size:(18) direction:(0)" class="indent" height="45" src="/bjc-r-ita/img/3-lists/BarGraph_img/labelChina.png" title="label, text:(China) size:(18) direction:(0)"/><img alt="China label" height="100" src="/bjc-r-ita/img/3-lists/BarGraph_img/China.png" title="China label"/><br/><br/>
                    Note that the orientation directions should follow Snap<em>!</em> â€™s convention for directions (0<sup>o</sup> up, 90<sup>o</sup> right, 180<sup>o</sup> down, 270<sup>o</sup> left).  Test your new <code>label</code> with the four directions.<br/>
<img alt="China label in 4 directions" class="indent" height="250" src="/bjc-r-ita/img/3-lists/BarGraph_img/ChinaLabels.png" title="China label in 4 directions"/>
</li>
<li>
                    Develop code for the <code>draw bar</code> block. It should draw a vertical bar (a line with the given width and height) straight up from the current location with a label placed underneath the bar.<br/>
<img alt="draw bar, label:(Germany) label size:(12) width:(25) height:(120)" class="indent" height="45" src="/bjc-r-ita/img/3-lists/BarGraph_img/drawbar.png" title="draw bar, label:(Germany) label size:(12) width:(25) height:(120)"/>
<img alt="Germany bar" class="indent" height="200" src="/bjc-r-ita/img/3-lists/BarGraph_img/barGermany.png" title="Germany bar"/>
<div class="endnote">
                        You may wish to review your earlier <a href="/bjc-r-ita/cur/programming/3-lists/1-abstraction/4-brick-wall.html" title="Brick Wall">Brick Wall</a> project to remind yourself how to draw bars with a pen of a given width.  You don't need to import <code>set flat line ends to</code> block from that project but make sure that you have "Flat line ends" selected from the Settings menu to draw rectangular bars.  You can see below the difference in two types of lines drawn.<br/>
<img alt="Flat line ends option" class="indent" height="200" src="/bjc-r-ita/img/3-lists/BarGraph_img/FlatLineEnds.png" title="Flat line ends option"/>
<img alt="Flat line bar" class="indent" height="100" src="/bjc-r-ita/img/3-lists/BarGraph_img/FlatLineBar.png" title="Flat line bar"/>
<img alt="Rounded line bar" height="120" src="/bjc-r-ita/img/3-lists/BarGraph_img/RoundedBar.png" title="Rounded line bar"/>
</div>
</li>
<li>
                    Develop code for the <code>draw bars</code> block, which should draw a series of labelled bars of the desired width and an appropriate height that start on the left and continue to the right.  In order to properly level the bars and the labels you may need to refer to the global variables <var>x-origin</var>, <var>y-origin</var>.<br/>
<img alt="draw bars, bar width:(20) max bar height:(240) data:(CO2 Emissions Data)" class="indent" height="60" src="/bjc-r-ita/img/3-lists/BarGraph_img/drawthebars.png" title="draw bars, bar width:(20) max bar height:(240) data:(CO2 Emissions Data)"/>
<img alt="Country bars" class="indent" height="250" src="/bjc-r-ita/img/3-lists/BarGraph_img/bars.png" title="Country bars"/>
</li>
<div class="narrower">
                    Note that given a maximum bar height, the heights of all the bars can be computed as a fraction of this maximum bar height.  Using the following proportion, you can derive each country's bar height:
                    <span class="katex-block"> \frac{\text{country bar height}}{\text{max bar height}} =  \frac{\text{country data value}}{\text{max data value}}</span>
                    For example, if maximum bar height=240 and you want to find how tall the bar for USA should be, you first find the largest value in the data set which is 8715 (from China) and do the following computation<br/>
<span class="katex-block"> {\text{USA bar height}} =  {\text{max bar height .}}\frac{\text{USA data value}}{\text{max data value}} = {\text{240 .}}\frac{\text{5491}}{\text{8715}}\approx {\text{151}}</span>
<br/>
                    While finding the maximum of the data values, first you need to get a list of values and then apply the <code>max of list</code> block.  The following block which uses the selector <code>value from data-record</code> will extract a list of <em>values</em> from the given <var>data list</var>.<br/>
<img alt="map(value from data-record()) over (data list)" class="indent" height="45" src="/bjc-r-ita/img/3-lists/BarGraph_img/mapgetvalue.png" title="map(value from data-record()) over (data list)"/>
</div>
<li>
                    Develop code for the <code>label vertical axis</code> block so that it labels the vertical axis based on the specified inputs. For simplicity, you can assume that the labels will always split the vertical axis into 10 equal parts (using 11 tick marks) like this:<br/>
<img alt="label vertical axis, vertical height:(240) data:(CO2 Emissions Data)" class="indent" height="45" src="/bjc-r-ita/img/3-lists/BarGraph_img/labelyaxis.png" title="label vertical axis, vertical height:(240) data:(CO2 Emissions Data)"/>
<img alt="y-axis labels" height="250" src="/bjc-r-ita/img/3-lists/BarGraph_img/yaxislabels.png" title="y-axis labels"/>
</li>
<li>
                    Now you are ready to put everything together and develop code for the <code>Bar Graph</code> drawing block for a given <var>data list</var> input.  Fill in the blanks.  <br/>
<div class="sidenote">You are allowed to use any other blocks as you need in the definition of <code>Bar Graph</code>.</div>
<img alt="Bar Graph, data:(data list){draw axes, x0:() y0:() horizontal length:() vertical length:(); change x by (); draw bars, bar width:() max bar height:() data:(data list); label vertical axis, vertical height:() data:(data list)}" class="indent" height="180" src="/bjc-r-ita/img/3-lists/BarGraph_img/BarGraphdata.png" title="Bar Graph, data:(data list){draw axes, x0:() y0:() horizontal length:() vertical length:(); change x by (); draw bars, bar width:() max bar height:() data:(data list); label vertical axis, vertical height:() data:(data list)}"/>
</li>
<li>
                    When everything is done, the following code, with a few extra labels for the graph title, should produce a bar graph as shown below:<br/>
<img alt="Bar Graph, data:(CO2 Emissions Data)" class="indent" height="45" src="/bjc-r-ita/img/3-lists/BarGraph_img/codeCO2EmissionsData.png" title="Bar Graph, data:(CO2 Emissions Data)"/><br/>
<div class="sidenote">Please note that the lowest value on the vertical axis must be <em><strong>zero</strong></em> for this bar graph to be a legitimate data visualization.  If, for example, you had started the vertical axis at 5000, it would look like China is a vastly worse polluter than the USA.  <br/><br/>In general, be very skeptical of graphs presented to you that do not start at <em><strong>zero</strong></em>.</div>
<img alt="Bar Graph of CO2 Emissions" class="indent" height="300" src="/bjc-r-ita/img/3-lists/BarGraph_img/CO2bargraph.png" title="Bar Graph of CO2 Emissions"/>
</li>
<li>
                    Your coding should be general enough to accommodate a new set of data (also included in your starter file):<br/>
<img alt="Bar Graph, data:(CO2 Emissions per capita Data)" class="indent" height="45" src="/bjc-r-ita/img/3-lists/BarGraph_img/codeCO2EmissionsPerCapita.png" title="Bar Graph, data:(CO2 Emissions per capita Data)"/><br/>
<img alt="Bar Graph CO2 Emissions per capita" class="indent" height="300" src="/bjc-r-ita/img/3-lists/BarGraph_img/CO2EmissionsPerCapita.png" title="Bar Graph CO2 Emissions per capita"/>
</li>
<div class="endnote">
                    Note: "per capita" means "per person".  So, for example for China, the total CO<sub>2</sub> emissions was divided by the population:<br/>
<span class="katex-block">\frac{\text{8715 Million metric tons}}{\text{1.337 Billion persons}} =  {\text{6.52 metric tons per person}}</span>
                   
                	These values are already given to you in the starter file as <code>CO<sub>2 </sub>Emissions per capita Data</code>.
                </div>
<img alt="Talk with Your Partner" class="imageRight" src="/bjc-r-ita/img/icons/talk-with-your-partner.png" title="Talk with Your Partner"/>
<li>In collaboration with your partner, compare the two bar graphs.  What insights does each graph provide about CO<sub>2</sub> emissions? Is one better than the other?</li>
<img alt="Save your work" class="imageRight" src="/bjc-r-ita/img/icons/save-now.png" title="Save your work"/>
</ol>
</div>
<div class="ifTime">
<ol start="13">
<li>
<strong>Data Processing:</strong> Look at the Variables palette to locate the <code>Country-GDP-Population Data</code> block.  When you examine its contents you will notice that it is a list of lists containing data on the GDP (<a href="https://en.wikipedia.org/wiki/Gross_domestic_product" target="_blank" title="Wikipedia: Gross Domestic Product">Gross Domestic Product</a>) and population size for each of the countries you studied in this project.  <em>Process</em> the data so you can create a bar graph for the GDP <strong>per capita</strong> of each country.<br/>
<br/>
<img alt="Country-GDP-Population Data" class="indent" height="200" src="/bjc-r-ita/img/3-lists/BarGraph_img/Country-GDP-Population.png" title="Country-GDP-Population Data">
<br/><br/>
                
                Click here for a<a class="collapsed" data-toggle="collapse" href="#hint-2" title="Hint"> hint</a> on how to <em>process</em> data quickly using the higher-order function <code>map</code>.
                            <div class="collapse" id="hint-2">
                            These blocks may help:<br/>
<img alt="data-record, label:() value:(); ()/(); item (1) of (); item (2) of (); item (3) of (); map() over (Country-GDP-Population Data)" class="indent" height="100" src="/bjc-r-ita/img/3-lists/BarGraph_img/dataProcessHint.png" title="data-record, label:() value:(); ()/(); item (1) of (); item (2) of (); item (3) of (); map() over (Country-GDP-Population Data)"><br/>
</img></div>
</img></li>
<li>Now collect some data in your class or from the internet on a topic you care about that would lend itself to visualization with a bar graph.  Use your Snap<em>!</em> program to visualize your data.  Share your work with your classmates.</li>
</ol>
</div>
<div class="takeItFurther">
<ol type="A">
<li>
                    Sometimes it is more convenient to present your bar graph with horizontal bars instead of vertical ones.  Modify your code so that it takes an input indicating which type of bar graph (horizontal or vertical) is to be generated.<br/>
<img alt="Horizontal Bar Graph" class="indent" height="300" src="/bjc-r-ita/img/3-lists/BarGraph_img/HorizontalBarGraph.png" title="Horizontal Bar Graph"/>
</li>
<li>
                    Histograms display <em>numerical</em> data grouped into ranges (called bins) and plotted as bars.  For example, the histogram below shows the number of students in each age group at a summer camp.  Learn about histograms and create a data visualization tool in Snap<em>!</em> for displaying histograms. <br/>
<img alt="Histogram" class="indent" height="250" src="/bjc-r-ita/img/3-lists/BarGraph_img/Histogram.JPG" title="Histogram"/>
</li>
</ol>
</div>
</body>
</html>
